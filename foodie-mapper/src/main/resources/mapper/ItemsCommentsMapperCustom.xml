<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="me.atm.mapper.ItemsCommentsMapper" >

  <select id="queryItemComments" resultType="me.atm.pojo.vo.ItemCommentVO">
      SELECT
          u.face AS userFace,
          u.nickname AS nickname,
          ic.created_time AS createdTime,
          ic.content AS content,
          ic.sepc_name AS specName,
          ic.comment_level as commentLevel
      FROM
          items_comments ic
      LEFT JOIN
          users u
      ON
          ic.user_id = u.id
      WHERE
          ic.item_id = #{itemId}
      <if test="level != null and level != '' ">
          AND comment_level = #{level}
      </if>
  </select>
</mapper>